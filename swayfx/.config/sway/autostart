# Run on reload
exec_always {
#xrdb ~/.Xdefaults
}

# Run once at login
exec {
    # https://github.com/swaywm/sway/wiki#systemd-and-dbus-activation-environments
    # systemd
    if file /sbin/init | grep systemd ; then
        exec systemctl --user import-environment WAYLAND_DISPLAY DISPLAY XDG_CURRENT_DESKTOP SWAYSOCK I3SOCK
        # Prevents GTK apps from hanging for 15-20 sec before launching
        exec dbus-update-activation-environment --systemd DBUS_SESSION_BUS_ADDRESS DISPLAY XAUTHORITY

#if command -v mpd-mpris &>/dev/null ; then
#            systemctl start --user mpd-mpris
#        fi
    else
# non-systemd
        exec dbus-update-activation-environment WAYLAND_DISPLAY DISPLAY XDG_CURRENT_DESKTOP SWAYSOCK I3SOCK

         exec dbus-update-activation-environment DBUS_SESSION_BUS_ADDRESS DISPLAY XAUTHORITY
    fi

    # GTK
    # https://github.com/swaywm/sway/wiki/GTK-3-settings-on-Wayland#setting-values-in-gsettings
    # Loading custom gtk theme under ~/.themes
    gsettings set org.gnome.desktop.interface gtk-theme $theme
    gsettings set org.gnome.desktop.interface color-scheme 'prefer-dark'

# Notifications
    dunst

# Fast terminal 
    foot -s

# if Thunar
    if command -v thunar &>/dev/null ; then
        thunar --daemon
    fi

# EWW
    ~/.config/eww/scripts/start.sh
}
